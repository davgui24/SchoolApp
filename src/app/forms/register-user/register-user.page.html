<ion-header>
  <ion-toolbar color="primary" padding>
      <ion-buttons slot="start">
          <ion-back-button text="Atrás" *ngIf="urlBackGlobal" defaultHref="list-user"></ion-back-button>
          <ion-back-button text="Atrás" *ngIf="urlBackAdmin" defaultHref="list-admin"></ion-back-button>
          <ion-back-button text="Atrás" *ngIf="urlBackTeacher" defaultHref="list-teacher"></ion-back-button>
          <ion-back-button text="Atrás" *ngIf="urlBackStudent" defaultHref="list-student"></ion-back-button>
          <ion-back-button text="Atrás" *ngIf="urlBackFather" defaultHref="list-father"></ion-back-button>
      </ion-buttons>
      <ion-title>
          <!-- <h1>Hola</h1> -->
      </ion-title>
  </ion-toolbar>
</ion-header>


<ion-content>
          <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
              <ion-infinite-scroll-content
              loading-spinner=""
              loadingText="">
          <ion-grid style="margin-left: 5%; margin-top: 10%; margin-right: 5%;">

            <ion-input class="search" *ngIf="inputFormUser.ImputStudents" name="search" [(ngModel)]="search" type="text" (keyup)=searchStudent() placeholder="Search student" autocomplete="off"></ion-input>

              <form [formGroup]="FormEntity">
                <ion-row>
                    <ion-col size="12">
                        <ion-item-group>
                          <ion-item>
                              <ion-label position="floating">Name</ion-label>
                              <ion-input formControlName="name" type="text" placeholder="Enter name" autocomplete="off"></ion-input>
                              <ion-text color="danger" *ngIf="frmEntity().name.invalid && frmEntity().name.dirty">
                                Required field.
                              </ion-text>
                          </ion-item>

                          <ion-item>
                            <ion-label position="floating">User name</ion-label>
                            <ion-input formControlName="username" type="text"  placeholder="Enter user" autocomplete="off" [disabled]="userUrl.username != ''"></ion-input>
                            <ion-text color="danger" *ngIf="frmEntity().username.invalid && frmEntity().username.dirty">
                              Required field.
                            </ion-text>
                        </ion-item>

                        <ion-item>
                            <ion-label position="floating">Password</ion-label>
                            <ion-input formControlName="password" type="Password" placeholder="Enter password" autocomplete="off"></ion-input>
                            <ion-text color="danger" *ngIf="frmEntity().password.invalid && frmEntity().password.dirty">
                              Required field.
                            </ion-text>
                        </ion-item>

                    </ion-item-group>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col size="12">
                        <ion-item-group>
                          <ion-item *ngIf="inputFormUser.inputSchool">
                              <ion-label position="floating">School</ion-label>
                              <ion-select formControlName="school" name="school">
                                  <ion-select-option *ngFor="let school of schools"  [value]="school.id">{{school.name}}</ion-select-option>
                                </ion-select>
                                <ion-text color="danger" *ngIf="frmEntity().school.invalid && frmEntity().school.dirty">
                                  Required field.
                                </ion-text>
                          </ion-item>

                          <ion-item>
                            <ion-label position="floating">Role</ion-label>
                            <ion-select formControlName="role" placeholder="Select Role">
                                <ion-select-option value="Global" *ngIf="selectRole.global">Global</ion-select-option>
                                <ion-select-option value="Admin" *ngIf="selectRole.admin">Admin</ion-select-option>
                                <ion-select-option value="Teacher" *ngIf="selectRole.teacher">Teacher</ion-select-option>
                                <ion-select-option value="Student" *ngIf="selectRole.student">Student</ion-select-option>
                                <ion-select-option value="Father" *ngIf="selectRole.father">Father</ion-select-option>
                              </ion-select>
                              <ion-text color="danger" *ngIf="frmEntity().role.invalid && frmEntity().role.dirty">
                                Required field.
                              </ion-text>
                        </ion-item>
                        
                        <ion-item  *ngIf="inputFormUser.ImputGroup">
                          <ion-label position="floating">Group</ion-label>
                          <ion-select formControlName="group" [(ngModel)]='groupCurrent'>
                              <ion-select-option [value]="group.id" *ngFor="let group of groups">{{group.name}}</ion-select-option>
                            </ion-select>
                          <ion-text color="danger" *ngIf="frmEntity().group.invalid && frmEntity().group.dirty">
                              Required field.
                            </ion-text>
                      </ion-item>

                      <ion-item *ngIf="inputFormUser.ImputCourse">
                          <ion-label position="floating">Course</ion-label>
                          <ion-select formControlName="course" multiple="true">
                              <ion-select-option  value="7-E">primero</ion-select-option>
                              <ion-select-option value="6-A">segundo</ion-select-option>
                              <ion-select-option value="8-B">tercero</ion-select-option>
                          </ion-select>
                          <ion-text color="danger" *ngIf="frmEntity().course.invalid && frmEntity().course.dirty">
                              Required field.
                          </ion-text>
                      </ion-item>

                      <ion-item *ngIf="inputFormUser.InputSubject">
                          <ion-label position="floating">Subject</ion-label>
                          <ion-select formControlName="subject" multiple="true" [(ngModel)]='subjectsTeacher'>
                              <ion-select-option [value]="subject.id" *ngFor="let subject of subjects">{{ subject.code }} - {{subject.name }}</ion-select-option>
                          </ion-select>
                          <ion-text color="danger" *ngIf="frmEntity().subject.invalid && frmEntity().subject.dirty">
                              Required field.
                          </ion-text>
                      </ion-item>

                      <ion-item *ngIf="inputFormUser.ImputStudents">
                        <ion-label position="floating">Students</ion-label>
                        <ion-select formControlName="students" multiple (ionChange)="selectStudent()">
                            <ion-select-option [value]="student.id" *ngFor="let student of students">{{student.name}}</ion-select-option>
                          </ion-select>
                          <ion-text color="danger" *ngIf="frmEntity().students.invalid && frmEntity().students.dirty">
                            Required field.
                          </ion-text>
                    </ion-item>
                    </ion-item-group>

                    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
                      <ion-infinite-scroll-content
                      loading-spinner=""
                      loadingText="">
                        <ion-content style="height: 30%;">
                            <ion-grid>
                              <ion-row style="font-size: 15px; font-weight: bold; text-align: center;">
                                <ion-col>Name</ion-col>
                                <ion-col>Grade</ion-col>
                                <ion-col>Remove</ion-col>
                              </ion-row>
                              <ion-row  style="font-size: 13px; text-align: center;" *ngFor="let student of studentSelect">
                                  <ion-col>{{ student.name }}</ion-col>
                                  <ion-col>{{ student.group.name }}</ion-col>
                                  <ion-col (click)="removeStudent(student)"><ion-icon name="trash"></ion-icon></ion-col>
                              </ion-row>
                            </ion-grid>
                            <ion-text color="danger" *ngIf="validateSelectStudent">
                                Required field.
                              </ion-text>
                        </ion-content>
                  </ion-infinite-scroll-content>
                </ion-infinite-scroll>

                    <ion-card>
                      <ion-button expand="full" color="primary" type="submit" (click)="registerForm()" block style="margin-top: 10%;">
                        <ion-icon name="save"></ion-icon>
                      </ion-button>
                    </ion-card>
                    </ion-col>
                </ion-row>
              </form>
          </ion-grid>
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ion-content>